<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    * {
        font-size: 0;
        margin: 0;
    }

    header {
        background-color: #5cc4ef;
    }

    .head {
        font-size: 16px;
        height: 100px;
        text-align: center;
    }

    main {
        width: 1080px;
        height: 760px;
        margin: 0 auto;
        /* padding: 10px; */
        background-color: rgba(231, 228, 228, 0.536);
        display: flex;
    }

    .menu {
        background-color: white;
        width: 195px;
        height: 730px;
        border-radius: 5px;
        margin: 15px 0 15px 15px;
        display: inline-block;
    }

    .menu>div {
        background-color: #5cc4ef;
        width: 175px;
        height: 51px;
        border-radius: 5px;
    }

    .menu>div:nth-child(n+2) {
        margin: 0 10px 10px 10px;
    }

    .h_menu {
        margin: 10px;
    }

    .contents {
        width: 840px;
        height: 730px;
    }

    .main {
        width: 840px;
        height: 730px;
        margin: 15px;
        background-color: white;
        border-radius: 5px;
    }
    .my_chart{
        display: inline-block;
        width: 810px;
        height: 80px;
        margin: 15px;
        background-color: #5cc4ef;
        border-radius: 5px;
    }
    .chart_title{
        display: inline-block;
        width: 440px;
        font-size: 28px;
        height: 80px;
        line-height: 80px;
        text-align: center;
    }
    #chart_box{
        display: inline-block;
        width: 810px;
        height: 320px;
        background-color: #5cc4ef60;
        margin: 0 15px 15px 15px;
        border-radius: 5px;
    }
    .doughnut_chart{
        display: inline-block;
        width: 335px;
        height: 300px;
        margin: 10px;
    }
    #d_chart {
        width: 445px;
        height: 300px;
        margin: 0 auto;
    }
    .chartjs-doughnut-chart .chartjs-doughnut-arc text {
      fill: black;
    }
    .line_chart{
        display: inline-block;
        width: 425px;
        height: 300px;
        margin: 15px;
        vertical-align: top;
    }
    .select_data{
        width: 425px;
        height: 60px;
        background-color: rgb(39, 39, 228);
        border-radius: 10px;
        margin-bottom: 10px;
    }
    .select_line > div{
        margin-top: 7px;
        border-radius: 5px;
        display: inline-block;
        margin-left: 16px;
        width: 120px;
        height: 45px;
        line-height: 45px;
        text-align: center;
        background-color: #cae6f4;
        font-size: 17px;
        cursor: pointer;
    }
    .data_box{
        display: inline-block;
        width: 810px;
        height: 270px;
        background-color: #5cc4ef60;
        margin-top: 6px;
        border-radius: 5px;
    }
    .regular_spending, .irregular_spending{
        display: inline-block;
        /* background-color: black; */
        width: 260px;
        height: 100%;
        border-radius: 5px;
    }
    .re_title, .ir_title, .sv_title{
        height: 35px;
        font-size: 18px;
        line-height: 35px;
        background-color: #5cc4ef;
        border-radius: 5px;
        padding-left: 10px;
        font-weight: bold;
        vertical-align: top;
    }
    .re_contents, .ir_contents{
        height: 192px;
        vertical-align: top;
    }
    .contents_name{
        display: inline-block;
        background-color: #5cc4ef60;
        width: 125px;
        height: 32px;
        border-radius: 5px;
        padding-left: 10px;
        font-size: 17px;
        line-height: 32px;
        
    }
    .contents_money{
        display: inline-block;
        background-color: #5cc4ef60;
        width: 120px;
        height: 32px;
        border-radius: 5px;
        padding-left: 5px;
        font-size: 16px;
        line-height: 32px;
        vertical-align: top;
    }
    .sum{
        border-radius: 5px;
        width: 270px;
        height: 42px;
        display: inline-block;
        background-color: #5cc4ef90;
    }
    .sum_title{
        display: inline-block;
        line-height: 42px;
        font-size: 18px;
        padding-left: 5px;
        width: 50px;
    }
    .re_sum_money, .ir_sum_money{
        vertical-align: top;
        display: inline-block;
        text-align: right;
        font-size: 18px;
        line-height: 42px;
        width: 200px;
        padding-right: 5px;
    }
    .saving_spending{
        display: inline-block;
        width: 289px;
        height: 100%;
        border-radius: 5px;
        vertical-align: top;
    }
    .sv_name{
        width: 144px;
    }
    .sv_money{
        width: 130px;
    }
    .sv_contents{
        height: 128px;
    }
    .sv_sum{
        width: 289px;
    }
    .sv_sum_money{
        vertical-align: top;
        display: inline-block;
        text-align: right;
        font-size: 18px;
        line-height: 42px;
        padding-right: 5px;
        width: 229px;
    }
    .sums{
        display: inline-block;
        width: 289px;
        height: 65px;
        border-radius: 5px;
        background-color: #5cc4ef;
    }
    .sums > div{
        display: inline-block;
        font-size: 18px;
        height: 65px;
        line-height: 65px;
        vertical-align: top;
        font-weight: bold;
    }
    .sums_title{
        width: 75px;
        padding-left: 5px;
    }
    .sums_money{
        width: 204px;
        padding-right: 5px;
        text-align: right;
    }
</style>
<main>
    <section class="contents">
        <div class="main">
            <div class="my_chart">
                <div class="chart_title">주간 지출 내역서</div>
            </div>
            <div id="chart_box">
                <div class="contents_box">

                </div>
                <div class="chart_box">
                    <div class="line_chart">
                        <div class="select_data">
                            <div class="select_dou"></div>
                            <div class="select_line">
                                <div>주간</div>
                                <div>월간</div>
                                <div>연간</div>
                            </div>
                        </div>
                        <canvas id="l_chart"></canvas>
                    </div>
                    <div class="doughnut_chart">
                        <canvas id="d_chart"></canvas>
                    </div>
                </div>
                <div class="data_box">
                    <div class="regular_spending">
                        <div class="re_title">고정 지출</div>
                        <div class="re_contents">
                            <div class="contents_name">-</div>
                            <div class="contents_money">1,100</div>
                            <div class="contents_name">-</div>
                            <div class="contents_money">5,120</div>
                        </div>
                        <div class="sum">
                            <div class="sum_title">합계 :</div>
                            <div class="re_sum_money"></div>
                        </div>
                    </div>
                    <div class="irregular_spending">
                        <div class="ir_title">변동 지출</div>
                        <div class="ir_contents">
                            <div class="contents_name">-</div>
                            <div class="contents_money">1</div>
                        </div>
                        <div class="sum">
                            <div class="sum_title">합계 :</div>
                            <div class="ir_sum_money"></div>
                        </div> 
                    </div>
                    <div class="saving_spending">
                        <div class="sv_title">저축</div>
                        <div class="sv_contents">
                            <div class="sv_name contents_name">-</div>
                            <div class="sv_money contents_money">1</div>
                            <div class="sv_name contents_name">-</div>
                            <div class="sv_money contents_money">1</div>
                            <div class="sv_name contents_name">-</div>
                            <div class="sv_money contents_money">1</div>
                            <div class="sv_name contents_name">-</div>
                            <div class="sv_money contents_money">1</div>
                        </div>
                        <div class="sv_sum sum">
                            <div class="sum_title">합계 :</div>
                            <div class="sv_sum_money"></div>
                        </div> 
                        <div class="sums">
                            <div class="sums_title">총 합계 :</div>
                            <div class="sums_money"></div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>
</main>
<script>
    let re_moneys = document.querySelectorAll(".re_contents > .contents_money")
    let re_sum = 0
    for(let i = 0 ;i<re_moneys.length ;i++)
        re_sum += parseFloat(re_moneys[i].innerText.replace(/,/g, ''))
    document.querySelector(".re_sum_money").innerText = re_sum.toLocaleString('ko-KR')+" 원"
    let ir_moneys = document.querySelectorAll(".ir_contents > .contents_money")
    let ir_sum = 0
    for(let i = 0 ;i<ir_moneys.length ;i++)
        ir_sum += parseFloat(ir_moneys[i].innerText.replace(/,/g, ''))
    document.querySelector(".ir_sum_money").innerText = ir_sum.toLocaleString('ko-KR')+" 원"
    let sv_moneys = document.querySelectorAll(".sv_contents > .contents_money")
    let sv_sum = 0
    for(let i = 0 ;i<sv_moneys.length ;i++)
        sv_sum += parseFloat(sv_moneys[i].innerText.replace(/,/g, ''))
    document.querySelector(".sv_sum_money").innerText = sv_sum.toLocaleString('ko-KR')+" 원"
    document.querySelector(".sums_money").innerText = (re_sum+ir_sum+sv_sum).toLocaleString('ko-KR')+" 원"
</script>
<script>
    let doughnutChartData = {
        // 항목
        labels: ['식비', '교육', '교통', '통신비'],
        datasets: [{
            data: [135500, 50500, 14300, 12020],
        }]
    }
    let ctxDoughnut = document.getElementById('d_chart').getContext('2d');
    let myDoughnutChart = new Chart(ctxDoughnut, {
      type: 'doughnut',
      data: doughnutChartData
    })
  </script>
<script>
    // 그래프 차트
    let chartData = {
      labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],
      datasets: [{
        label: '연간',
        // borderColor: 'rgb(75, 192, 192)',
        data: [5365, 58499, 125280, 81, 56, 12513, 436346, 5365, 59, 64380, 111181, 12513],
      }]
    }

    // 차트 옵션
    let chartOptions = {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }

    // 차트 생성
    let ctx = document.getElementById('l_chart').getContext('2d');
    let myChart = new Chart(ctx, {
        type: 'line',
        data: chartData,
        options: chartOptions
    })
  </script>
  <script>
    let line = document.querySelectorAll(".select_line > div")
    line[0].style.backgroundColor = "#5cc4ef"
    for(let i = 0 ;i<line.length ;i++){
        line[i].addEventListener("click",function(){
            line[i].style.backgroundColor = "#5cc4ef"
            window.location.href = "/api/"+i
            for(let j = 0 ;j<line.length ;j++)
                if(i!=j)
                    line[j].style.backgroundColor = "#cae6f4"
        })
    }
  </script>